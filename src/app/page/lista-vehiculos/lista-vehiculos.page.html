<ion-menu content-id="main-content">
  <ion-header>
    <ion-toolbar color="primary">
      <ion-title>TeLlevoApp</ion-title>
    </ion-toolbar>
  </ion-header>

  <ion-content>
    <ion-list>
      <ion-item routerLink="/login">INICIAR SESION</ion-item>
      <ion-item routerLink="/crear-user">CREAR CUENTA</ion-item>
      <ion-item routerLink="/recuperar-pass">Recuperar contraseña</ion-item>
      <ion-item routerLink="/agregar-vehiculo">AGREGAR VEHICULO</ion-item>
      <ion-item routerLink="/lista-vehiculos">MIS VEHICULOS</ion-item>
    </ion-list>
  </ion-content>
</ion-menu>

<div class="page-container">
  <ion-header>
    <ion-toolbar>
      <ion-buttons slot="start">
        <ion-back-button defaultHref="/principal"></ion-back-button>
      </ion-buttons>

      <img src="/assets/img/duoc.png" class="responsive-image" alt="Logo Duoc"/>

      <ion-buttons slot="end">
        <ion-menu-button></ion-menu-button>
      </ion-buttons>
    </ion-toolbar>
  </ion-header>

  <ion-content id="main-content" class="ion-padding">
    <div class="content-container">
      <h1 class="ion-text-center">Mis Vehículos</h1>

      <ion-refresher slot="fixed" (ionRefresh)="cargarVehiculos($event)">
        <ion-refresher-content></ion-refresher-content>
      </ion-refresher>

      <div *ngIf="vehiculos.length === 0" class="ion-text-center ion-padding">
        <p>No tienes vehículos registrados</p>
        <ion-button routerLink="/agregar-vehiculo">
          <ion-icon slot="start" name="add"></ion-icon>
          Agregar Vehículo
        </ion-button>
      </div>

      <ion-grid>
        <ion-row>
          <ion-col size="12" size-md="6" *ngFor="let vehiculo of vehiculos">
            <ion-card>
              <img 
                [src]="vehiculo.url_imagen || '/assets/img/default-car.png'" 
                (error)="handleImageError($event)"
                [alt]="vehiculo.marca + ' ' + vehiculo.modelo"
                class="vehicle-image"
              />
              <ion-card-header>
                <ion-card-subtitle>{{vehiculo.marca}} {{vehiculo.modelo}}</ion-card-subtitle>
                <ion-card-title>{{vehiculo.patente}}</ion-card-title>
              </ion-card-header>
              <ion-card-content>
                <ion-list lines="none">
                  <ion-item>
                    <ion-icon name="calendar" slot="start"></ion-icon>
                    <ion-label>Año: {{vehiculo.anio}}</ion-label>
                  </ion-item>
                  <ion-item>
                    <ion-icon name="color-palette" slot="start"></ion-icon>
                    <ion-label>Color: {{vehiculo.color}}</ion-label>
                  </ion-item>
                  <ion-item>
                    <ion-icon name="car" slot="start"></ion-icon>
                    <ion-label>Combustible: {{vehiculo.tipo_combustible}}</ion-label>
                  </ion-item>
                </ion-list>
              </ion-card-content>
            </ion-card>
          </ion-col>
        </ion-row>
      </ion-grid>

      <ion-fab vertical="bottom" horizontal="end" slot="fixed">
        <ion-fab-button routerLink="/agregar-vehiculo">
          <ion-icon name="add"></ion-icon>
        </ion-fab-button>
      </ion-fab>
    </div>
  </ion-content>

  <ion-footer class="footer">
    <ion-toolbar>
      <ion-title class="ion-text-center">Desarrollado por Jon.Roa</ion-title>
    </ion-toolbar>
  </ion-footer>
</div>

<style>
  .page-container {
    display: flex;
    flex-direction: column;
    min-height: 100vh;
  }

  .content-container {
    flex: 1;
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
  }

  .responsive-image {
    max-width: 150px;
    height: auto;
    display: block;
    margin: 0 auto;
    padding: 10px;
  }

  ion-card {
    margin-bottom: 16px;
  }

  .vehicle-image {
    width: 100%;
    height: 200px;
    object-fit: cover;
    object-position: center;
  }

  h1 {
    margin-bottom: 24px;
    color: var(--ion-color-primary);
  }

  ion-card-content ion-item {
    --padding-start: 0;
  }

  ion-fab {
    margin-bottom: 20px;
    margin-right: 20px;
  }

  ion-card-subtitle {
    text-transform: uppercase;
  }

  ion-list {
    background: transparent;
  }

  ion-item {
    --background: transparent;
  }
</style>